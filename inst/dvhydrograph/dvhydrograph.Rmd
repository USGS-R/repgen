---
output:
  html_document:
    css: ['shared-styles.css']
---
<div class="header">
<div>
<div class="header-logo">
```{r echo=FALSE, warning=FALSE, message=FALSE, results='asis'}
cat(getLogo())
```
</div>
<div class="header-title">
## `r fetchReportMetadataField(data,'title')` Report
</div>
</div>
<div class="header-labels">
<div class="header-col-left">
**Location:**  `r data[['reportMetadata']][['stationId']]` - `r data[['reportMetadata']][['stationName']]`

`r if(!isEmptyOrBlank(data[['reportMetadata']][['primaryDescriptions']])) {paste("**Primary Time Series:**", data[['reportMetadata']][['primaryDescriptions']])}`

`r if(!isEmptyOrBlank(data[['reportMetadata']][['downChainDescriptions1']])) {paste("**Stat Derived Time Series 1:**", data[['reportMetadata']][['downChainDescriptions1']])}`

`r if(!isEmptyOrBlank(data[['reportMetadata']][['downChainDescriptions2']])) {paste("**Stat Derived Time Series 2:**", data[['reportMetadata']][['downChainDescriptions2']])}`

`r if(!isEmptyOrBlank(data[['reportMetadata']][['downChainDescriptions3']])) {paste("**Stat Derived Time Series 3:**", data[['reportMetadata']][['downChainDescriptions3']])}`

`r if(!isEmptyOrBlank(data[['reportMetadata']][['comparisonSeriesDescriptions']])) {paste("**Comparison Time Series:**", data[['reportMetadata']][['comparisonSeriesDescriptions']])}`
</div>
<div class="header-col-right">
**Period:**  `r as.Date(data[['reportMetadata']][['startDate']])` to `r as.Date(data[['reportMetadata']][['endDate']])`

`r if(!isEmptyOrBlank(data[['reportMetadata']][['inputDataDescriptions2']])) {paste("**Secondary Reference Time Series:**", data[['reportMetadata']][['inputDataDescriptions2']])}`

`r if(!isEmptyOrBlank(data[['reportMetadata']][['inputDataDescriptions3']])) {paste("**Tertiary Reference Time Series:**", data[['reportMetadata']][['inputDataDescriptions3']])}`

`r if(!isEmptyOrBlank(data[['reportMetadata']][['inputDataDescriptions4']])) {paste("**Quaternary Reference Time Series:**", data[['reportMetadata']][['inputDataDescriptions4']])}`

**Created:**  `r sprintf("%s  (%s)", Sys.time(), Sys.timezone())`

`r if (length(author) != 0) { paste("**Author:**",author[[1]]) }`
`r if (length(author) == 0) { paste("**Author:** Username") }`
</div>
</div>
</div>

***

```{r echo=FALSE, warning=FALSE, message=FALSE, dev='svg', fig.height=10, fig.width=13, results='hide'}
par(mar=c(13, 4.5, 4, 2))
dvhplot <- createDVHydrographPlot(data)

if(!is.null(dvhplot)){
  secRefPlot <- createDVHydrographRefPlot(data, "secondaryReferenceTimeSeries", "inputDataDescriptions2")
  terRefPlot <- createDVHydrographRefPlot(data, "tertiaryReferenceTimeSeries", "inputDataDescriptions3")
  quaRefPlot <- createDVHydrographRefPlot(data, "quaternaryReferenceTimeSeries", "inputDataDescriptions4")
  printReportFeature(dvhplot)
  printReportFeature(secRefPlot)
  printReportFeature(terRefPlot)
  printReportFeature(quaRefPlot)
}
```

#`r if(is.null(dvhplot)) {paste("The dataset requested is empty.")}`#

`r getSimsUrl(data[["simsUrl"]])`

`r getWaterDataUrl(data[["waterdataUrl"]])`
